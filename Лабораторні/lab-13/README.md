# Лабораторна робота №13. Штучне створення конфлікту та його вирішення

[Перелік усіх робіт](README.md)

## Мета роботи

Отримати навички вирішення конфліктів у розгалужених проектах Git

## Теоретичні відомості

Іноді той самий контент можуть редагувати відразу кілька розробників. Якщо розробник A спробує змінити код, який редагує розробник B, може виникнути конфлікт. Для запобігання конфліктам розробники працюють в окремих ізольованих гілках. Основне завдання команди `git merge` полягає у злитті окремих гілок та вирішенні будь-яких конфліктуючих правок.

Git дозволяє виконувати злиття дуже просто. У більшості випадків Git самостійно вирішує, як автоматично інтегрувати нові зміни.

Зазвичай конфлікти виникають, коли дві людини змінюють одні й самі рядки у файлі або один розробник видаляє файл, який змінює інший розробник. У таких випадках Git не може автоматично визначити, яка зміна є правильною. Конфлікти торкаються лише того розробника, який виконує злиття, решта команди про конфлікт не знає. Git позначає файл як конфліктуючий та зупиняє процес злиття. І тут відповідальність за вирішення конфлікту несуть розробники.

### Типи конфліктів

#### Git перериває роботу на самому початку злиття

Виконання команди злиття переривається на початку, якщо Git виявляє зміни в робочому каталозі або розділі проіндексованих файлів поточного проекту. Git не може виконати злиття, оскільки інакше ці очікування будуть перезаписані новими комітами. Таке трапляється через конфлікти не з іншими розробниками, а з локальними змінами, що очікують. Локальний стан необхідно стабілізувати за допомогою команд `git stash`, `git checkout`, `git commit` або `git reset`.

#### Git перериває роботу під час злиття

Збій У ПРОЦЕСІ злиття говорить про наявність конфлікту між поточною локальною гілкою та гілкою, з якою виконується злиття. Це свідчить про конфлікт із кодом іншого розробника. Git зробить все можливе, щоб об'єднати файли, але залишить ділянки, що конфліктують, щоб ви дозволили їх вручну.

### Створення конфлікту злиття

Щоб краще розібратися в конфліктах злиття, у наступному розділі ми змоделюємо конфлікт для подальшого вивчення та вирішення. Для запуску прикладу, що моделюється, буде використовуватися інтерфейс Git c Unix-подібним командним рядком.

```bash
mkdir git-merge-test
cd git-merge-test
git init .
echo "this is some content to mess with" > merge.txt
git add merge.txt
git commit -am "we are commiting the inital content"
[master (root-commit) d48e74c] we are commiting the inital content
1 file changed, 1 insertion(+)
create mode 100644 merge.txt
```

За допомогою наведеної у цьому прикладі послідовності команд виконуються такі дії.

Створюється новий каталог з ім'ям git-merge-test, виконується перехід до цього каталогу та ініціалізація його як нового репозиторію Git.
Створюється новий текстовий файл merge.txtіз деяким вмістом.
До репозиторію додається файл merge.txtі виконується коміт.
Тепер у нас є новий репозиторій з однією гілкою masterта непустим файлом merge.txt. Далі створимо нову гілку, яка буде використовуватися як конфліктуюча при злитті.

```bash
git checkout -b new_branch_to_merge_later
echo "totally different content to merge later" > merge.txt
git commit -am "edited the content of merge.txt to cause a conflict"
[new_branch_to_merge_later 6282319] edited the content of merge.txt to cause a conflict
1 file changed, 1 insertion(+), 1 deletion(-)
```

Подана послідовність команд виконує такі дії.

Створює нову гілку з ім'ям new_branch_to_merge_laterта виконує перехід до неї.
Перезаписує вміст файлу merge.txt.
Виконує коміт нового вмісту.
У цій новій галузі new_branch_to_merge_laterми створили комміт, який перевизначив вміст файлу merge.txt.

```bash
git checkout master
Switched to branch 'master'
echo "content to append" >> merge.txt
git commit -am "appended content to merge.txt"
[master 24fbe3c] appended content to merge.tx
1 file changed, 1 insertion(+)
```

Ця послідовність команд виконує перемикання на гілку master, додає вміст файл merge.txt і робить комміт. Після цього в нашому експериментальному репозиторії знаходяться два нових коміти, перший - у гілці master, а другий - у гілці new_branch_to_merge_later. Тепер запустимо команду `git merge new_branch_to_merge_later` та подивимося, що з цього вийде!

```bash
git merge new_branch_to_merge_later
Auto-merging merge.txt
CONFLICT (content): Merge conflict in merge.txt
Automatic merge failed; fix conflicts and then commit the result.
```

Виник конфлікт. Добре, що система Git повідомила про це нам.

### Етапи вирішення конфліктів

Звертайте увагу на повідомлення про конфлікт в терміналі та відкрийте конфліктний файл у вашому редакторі коду.

У відповідних ділянках конфліктного файлу ви побачите помітки <<<<<<<, =======, і >>>>>>>. Виправте конфлікт, видаливши зайві рядки та залишаючи потрібні зміни. Після вирішення збережіть файл.

Використовуйте команду `git add` для позначення конфліктного файлу як вирішеного:

```bash
git add merge.txt
```

Та завершіть злиття:

```bash
git merge --continue
```

У випадку, якщо вирішення конфлікту необхідно відкласти, то на даному єтапі можливо відмінити злиття гілок:

```bash
git merge --abort
```

У разі успішного вирішення конфлікту та завершення злиття зафіксуйте новий стан репозиторію:

```bash
git commit -m "Вирішено конфлікти"
```

## Хід роботи

1.  Перевірити глобальні налаштування Git for Windows
2.  Для свого репозиторію створити файли та заповнити їх текстовим вмістом, в них в подальшому будуть створені конфлікти
3.  Зафіксувати зміни. Створити нову гілку. Назву гілки сформуйте наступним чином: `branchYourLastName1`
4.  За прикладом наведеним у теоретичних відомостях створити конфлікт злиття
5.  Вирішити конфлікт
6.  Для кожного етапу роботи зробити знімки екрану та додати їх у звіт з описом кожного скіншота
7.  Дати відповіді на контрольні запитання
8.  Зберегти звіт у форматі PDF
9.  Завантажити збережений PDF у репозиторій для лабораторних робіт

## Контрольні питання

1.  Що таке конфлікт?
2.  Як можливо штучно створити конфлікт?
3.  Як можливо вирішити конфлікт?
4.  Яку команду потрібно використати, щоб порівняти результат злиття з тим, що було у вашій гілці до злиття, або іншими словами побачити, що привнесло дане злиття?
5.  Який синтаксис потрібно використати щоб отримати повний список усіх унікальних комітів, що є у будь-якій з конфліктуючих гілок потрібно?

## Довідники та додаткові матеріали

1.  [Git - merge конфліктів](https://monsterlessons.com/project/lessons/git-merge-kofliktov)
2.  [Вирішення конфлікту](https://githowto.com/ru/resolving_conflicts)
3.  [Конфлікти злиття в Git](https://www.atlassian.com/ru/git/tutorials/using-branches/merge-conflicts)
4.  [Створення конфлікту](https://githowto.com/ru/creating_a_conflict)
5.  [Вирішення merge конфліктів у Git](https://habr.com/ru/post/323234/)
